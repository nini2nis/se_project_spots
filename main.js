!function(){"use strict";var e="",t=e+"80804e27ce061efd1ffb.svg",r=e+"49e44e5e03758262e8bf.svg",n=e+"975792ea68af0a3c209d.svg";function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Save";e.textContent=t?r:n}function a(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.preventDefault();const n=t.submitter,a=n.textContent;o(n,!0,r,a),e().then((()=>{t.target.reset()})).catch(console.error).finally((()=>{o(n,!1,r,a)}))}const s={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"},c=(e,t,r)=>{const n=e.querySelector(`.${t.id}-error`);t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorClass),n.textContent=""},i=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?d(t,r):(t.classList.remove(r.inactiveButtonClass),t.disabled=!1)},d=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0},l=e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{t.addEventListener("submit",(e=>{e.preventDefault()})),((e,t)=>{const r=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);i(r,n,t),r.forEach((o=>{o.addEventListener("input",(()=>{((e,t,r)=>{t.validity.valid?c(e,t,r):((e,t,r,n)=>{const o=e.querySelector(`.${t.id}-error`);t.classList.add(n.inputErrorClass),o.classList.add(n.errorClass),o.textContent=r})(e,t,t.validationMessage,r)})(e,o,t),i(r,n,t)}))}))})(t,e)}))};l(s),document.getElementById("header__logo").src=t,document.getElementById("profile__edit-icon").src=r,document.getElementById("profile__post-icon").src=n;const u=document.getElementById("profile__avatar"),m=document.querySelector("#avatar-modal"),h=document.forms["edit-avatar"],_=document.querySelector(".profile__avatar-btn"),f=m.querySelector("#avatar-link"),v=document.querySelector(".profile__edit-button"),p=document.querySelector("#edit-modal"),y=document.forms["edit-profile"],S=p.querySelector("#profile-name"),b=p.querySelector("#profile-description"),g=document.querySelector(".profile__name"),E=document.querySelector(".profile__description"),L=document.querySelector(".profile__post-button"),k=document.querySelector("#post-modal"),q=document.forms["new-post-form"],C=k.querySelector("#card-link"),U=k.querySelector("#card-name"),x=document.querySelector(".cards__list"),I=document.querySelectorAll(".modal"),$=document.querySelector("#card-template"),A=document.querySelector("#modal-preview"),B=A.querySelector(".modal__image-name"),w=A.querySelector(".modal__image"),R=document.querySelector("#modal-delete"),T=R.querySelector(".modal__form"),N=document.querySelector(".modal__cancel-button"),P=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._checkResponse)}editAvatar(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}addNewCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._checkResponse)}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}changeLikeStatus(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"cb408f20-cef0-4ee4-a289-c2194b9dd6d5","Content-Type":"application/json"}});let D,O;function j(e){console.log(e);const t=$.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__text"),n=t.querySelector(".card__image"),o=t.querySelector(".card__heart-button"),a=t.querySelector(".card__trash-button");return r.textContent=e.name,n.src=e.link,n.alt=e.name,e.isLiked&&o.classList.toggle("card__heart-button_liked"),o.addEventListener("click",(t=>{!function(e,t){const r=e.target.classList.contains("card__heart-button_liked");P.changeLikeStatus(t,r).then((()=>{e.target.classList.toggle("card__heart-button_liked")})).catch((e=>{console.error(e)}))}(t,e._id)})),a.addEventListener("click",(()=>function(e,t){D=e,O=t._id,J(R)}(t,e))),n.addEventListener("click",(()=>function(e){J(A),B.textContent=e.name,w.src=e.link,w.alt=e.name}(e))),t}function J(e){e.classList.add("modal_opened"),document.addEventListener("keydown",z),document.addEventListener("click",M)}function H(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",z),document.removeEventListener("click",M)}function z(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&H(e)}}function M(e){if(e.target===N){const e=document.querySelector(".modal_opened");e&&H(e)}}P.getAppInfo().then((e=>{let[t,r]=e;g.textContent=t.name,E.textContent=t.about,u.src=t.avatar,r.forEach((e=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const r=j(e);x[t](r)}(e,"append")}))})).catch((e=>{console.error(e)})),v.addEventListener("click",(()=>{var e,t;S.value=g.textContent,b.value=E.textContent,e=p,t=s,[S,b].forEach((r=>{c(e,r,t)})),J(p)})),_.addEventListener("click",(()=>{J(m)})),L.addEventListener("click",(()=>{J(k)})),I.forEach((e=>{e.addEventListener("mousedown",(t=>{t.target.classList.contains("modal_opened")&&H(e),t.target.classList.contains("modal__close-button")&&H(e)}))})),y.addEventListener("submit",(function(e){a((function(){return P.editUserInfo({name:S.value,about:b.value}).then((e=>{g.textContent=e.name,E.textContent=e.about,H(p)}))}),e)})),q.addEventListener("submit",(function(e){a((function(){return P.addNewCard({name:U.value,link:C.value}).then((t=>{const r=j(t);x.prepend(r),d(e.submitter,s),H(k)}))}),e)})),T.addEventListener("submit",(function(e){a((function(){return P.removeCard(O).then((()=>{D.remove(),H(R)}))}),e,"Deleting...")})),h.addEventListener("submit",(function(e){a((function(){return P.editAvatar({avatar:f.value}).then((t=>{u.src=t.avatar,d(e.submitter,s),H(m)}))}),e)})),l(s)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0orQixXQUFXLENBQ1ZULEtBQU1oQyxFQUFjaUYsTUFDcEJ0QyxLQUFNNUMsRUFBY2tGLFFBRXJCckosTUFBTXVKLElBQ0wsTUFBTTlCLEVBQWNILEVBQWVpQyxHQUNuQ2xGLEVBQVVtRixRQUFRL0IsR0FDbEIxRixFQUFjbkMsRUFBSUcsVUFBV1EsR0FDN0JxSSxFQUFXM0UsRUFBYSxHQUU5QixHQUN5QnJFLEVBQzNCLElBb0lBZ0YsRUFBV3BDLGlCQUFpQixVQXpFNUIsU0FBNEI1QyxHQU8xQkYsR0FOQSxXQUNFLE9BQU9vRixFQUFJa0MsV0FBV0ssR0FBZ0JySCxNQUFLLEtBQ3pDb0gsRUFBYTlGLFNBQ2JzSCxFQUFXakUsRUFBWSxHQUUzQixHQUN5Qi9FLEVBQUssY0FDaEMsSUFrRUF5RCxFQUFXYixpQkFBaUIsVUFuSzVCLFNBQWdDNUMsR0FZOUJGLEdBWEEsV0FDRSxPQUFPb0YsRUFDSjRCLFdBQVcsQ0FDVkUsT0FBUXBELEVBQWdCNkYsUUFFekJySixNQUFNdUgsSUFDTHBFLEVBQVlKLElBQU13RSxFQUFLWCxPQUN2QjdFLEVBQWNuQyxFQUFJRyxVQUFXUSxHQUM3QnFJLEVBQVd4RixFQUFZLEdBRTdCLEdBQ3lCeEQsRUFDM0IsSUF3SkFzQyxFQUFpQjNCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9IZWxwZXJzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZnVuY3Rpb24gc2V0QnV0dG9uVGV4dChcclxuICBidXR0b24sXHJcbiAgaXNMb2FkaW5nLFxyXG4gIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIixcclxuICBkZWZhdWx0VGV4dCA9IFwiU2F2ZVwiXHJcbikge1xyXG4gIGlmIChpc0xvYWRpbmcpIHtcclxuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBkZWZhdWx0VGV4dDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVTdWJtaXQocmVxdWVzdCwgZXZ0LCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xyXG4gIGNvbnN0IGRlZmF1bHRUZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnV0dG9uLCB0cnVlLCBsb2FkaW5nVGV4dCwgZGVmYXVsdFRleHQpO1xyXG4gIHJlcXVlc3QoKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcblxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ1dHRvbiwgZmFsc2UsIGxvYWRpbmdUZXh0LCBkZWZhdWx0VGV4dCk7XHJcbiAgICB9KTtcclxufVxyXG4iLCJjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGZvcm1JbnB1dCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtRXJyb3IgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtmb3JtSW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgZm9ybUlucHV0LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZm9ybUVycm9yLmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIGZvcm1FcnJvci50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxufTtcclxuXHJcbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBmb3JtSW5wdXQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1FcnJvciA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2Zvcm1JbnB1dC5pZH0tZXJyb3JgKTtcclxuICBmb3JtSW5wdXQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICBmb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgZm9ybUlucHV0LCBjb25maWcpID0+IHtcclxuICBpZiAoIWZvcm1JbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGZvcm1JbnB1dCwgZm9ybUlucHV0LnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgZm9ybUlucHV0LCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcclxuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIGNvbmZpZyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbn07XHJcblxyXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcbiAgKTtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICBpbnB1dExpc3QuZm9yRWFjaCgoZm9ybUlucHV0KSA9PiB7XHJcbiAgICBmb3JtSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBmb3JtSW5wdXQsIGNvbmZpZyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcclxuXHJcbmV4cG9ydCB7IHNldHRpbmdzLCByZXNldFZhbGlkYXRpb24sIGRpc2FibGVCdXR0b24sIGVuYWJsZVZhbGlkYXRpb24gfTtcclxuIiwiLyogICBIVE1MICYgQ1NTIE1PRFVMRSBJTVBPUlRTICAgICAqL1xyXG5cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCBsb2dvU3JjIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuY29uc3QgbG9nb0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJfX2xvZ29cIik7XHJcbmxvZ29JbWFnZS5zcmMgPSBsb2dvU3JjO1xyXG5cclxuaW1wb3J0IHBlblNyYyBmcm9tIFwiLi4vaW1hZ2VzL2ljb25fcGVuLnN2Z1wiO1xyXG5jb25zdCBwZW5JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fZWRpdC1pY29uXCIpO1xyXG5wZW5JbWFnZS5zcmMgPSBwZW5TcmM7XHJcblxyXG5pbXBvcnQgcGx1c1NyYyBmcm9tIFwiLi4vaW1hZ2VzL2ljb25fcGx1cy5zdmdcIjtcclxuY29uc3QgcGx1c0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlX19wb3N0LWljb25cIik7XHJcbnBsdXNJbWFnZS5zcmMgPSBwbHVzU3JjO1xyXG5cclxuLyogICAgSlMgTU9EVUxFIElNUE9SVFMgICAgICAgICAgKi9cclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XHJcblxyXG5pbXBvcnQgeyBoYW5kbGVTdWJtaXQgfSBmcm9tIFwiLi4vdXRpbHMvSGVscGVycy5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBzZXR0aW5ncyxcclxuICByZXNldFZhbGlkYXRpb24sXHJcbiAgZGlzYWJsZUJ1dHRvbixcclxuICBlbmFibGVWYWxpZGF0aW9uLFxyXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcclxuXHJcbi8qICBBVkFUQVIgU0VMRUNUT1JTICAgICAqL1xyXG5jb25zdCBhdmF0YXJJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5jb25zdCBhdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpO1xyXG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LWF2YXRhclwiXTtcclxuY29uc3QgYXZhdGFyRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ0blwiKTtcclxuY29uc3QgYXZhdGFyTGlua0lucHV0ID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbGlua1wiKTtcclxuXHJcbi8qICAgUFJPRklMRSBTRUxFQ1RPUlMgICAgKi9cclxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGVcIl07XHJcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcblxyXG4vKiAgIENBUkQgU0VMRUNUT1JTICAgICAqL1xyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wb3N0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3N0LW1vZGFsXCIpO1xyXG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibmV3LXBvc3QtZm9ybVwiXTtcclxuY29uc3QgY2FyZExpbmtJbnB1dCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbGlua1wiKTtcclxuY29uc3QgY2FyZE5hbWVJbnB1dCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbmFtZVwiKTtcclxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbi8qICAgTU9EQUwgJiBURU1QTEFURSBTRUxFQ1RPUlMgICAgICovXHJcbmNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuXHJcbi8qICAgSU1BR0UgTU9EQUwgU0VMRUNUT1JTICAgKi9cclxuY29uc3QgbW9kYWxQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1wcmV2aWV3XCIpO1xyXG5jb25zdCBtb2RhbEltYWdlTmFtZSA9IG1vZGFsUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1uYW1lXCIpO1xyXG5jb25zdCBtb2RhbEltYWdlID0gbW9kYWxQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG5cclxuLyogICAgREVMRVRFIE1PREFMIFNFTEVDVE9SUyAgICAqL1xyXG5jb25zdCBtb2RhbERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZGVsZXRlXCIpO1xyXG5jb25zdCBkZWxldGVGb3JtID0gbW9kYWxEZWxldGUucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuY29uc3QgY2FuY2VsTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYW5jZWwtYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiY2I0MDhmMjAtY2VmMC00ZWU0LWEyODktYzIxOTRiOWRkNmQ1XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRBcHBJbmZvKClcclxuICAudGhlbigoW3VzZXJJbmZvLCBjYXJkc10pID0+IHtcclxuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcclxuICAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xyXG4gICAgYXZhdGFySW1hZ2Uuc3JjID0gdXNlckluZm8uYXZhdGFyO1xyXG4gICAgY2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKGl0ZW0sIFwiYXBwZW5kXCIpO1xyXG4gICAgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgLy8gY3JlYXRlIGEgcmVxdWVzdCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlXHJcbiAgZnVuY3Rpb24gZWRpdFVzZXJJbmZvKCkge1xyXG4gICAgLy8gYHJldHVybmAgbGV0cyB1cyB1c2UgYSBwcm9taXNlIGNoYWluIGB0aGVuLCBjYXRjaCwgZmluYWxseWBcclxuICAgIHJldHVybiBhcGlcclxuICAgICAgLmVkaXRVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZTogcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSxcclxuICAgICAgICBhYm91dDogcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUsXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICAgICAgICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICAvLyBoZXJlIHdlIGNhbGwgaGFuZGxlU3VibWl0IHBhc3NpbmcgdGhlIHJlcXVlc3QgYW5kIGV2ZW50IChpZiB5b3Ugd2FudCBhIGRpZmZlcmVudCBsb2FkaW5nIHRleHQgdGhlbiB5b3UgbmVlZCB0byBwYXNzIHRoZSAzcmQgcGFyYW0pXHJcbiAgaGFuZGxlU3VibWl0KGVkaXRVc2VySW5mbywgZXZ0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdChldnQpIHtcclxuICBmdW5jdGlvbiBlZGl0QXZhdGFyKCkge1xyXG4gICAgcmV0dXJuIGFwaVxyXG4gICAgICAuZWRpdEF2YXRhcih7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJMaW5rSW5wdXQudmFsdWUsXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgYXZhdGFySW1hZ2Uuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICAgICAgZGlzYWJsZUJ1dHRvbihldnQuc3VibWl0dGVyLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBoYW5kbGVTdWJtaXQoZWRpdEF2YXRhciwgZXZ0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgZnVuY3Rpb24gYWRkTmV3Q2FyZCgpIHtcclxuICAgIHJldHVybiBhcGlcclxuICAgICAgLmFkZE5ld0NhcmQoe1xyXG4gICAgICAgIG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUsXHJcbiAgICAgICAgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZSxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSk7XHJcbiAgICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgIGRpc2FibGVCdXR0b24oZXZ0LnN1Ym1pdHRlciwgc2V0dGluZ3MpO1xyXG4gICAgICAgIGNsb3NlTW9kYWwoYWRkQ2FyZE1vZGFsKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIGhhbmRsZVN1Ym1pdChhZGROZXdDYXJkLCBldnQpO1xyXG59XHJcblxyXG5sZXQgc2VsZWN0ZWRDYXJkO1xyXG5sZXQgc2VsZWN0ZWRDYXJkSWQ7XHJcblxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XHJcbiAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgY29uc3QgY2FyZE5hbWUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIik7XHJcbiAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICBjb25zdCBoZWFydEJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faGVhcnQtYnV0dG9uXCIpO1xyXG4gIGNvbnN0IHRyYXNoQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XHJcblxyXG4gIGNhcmROYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIGNhcmRJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuXHJcbiAgaWYgKGRhdGEuaXNMaWtlZCkge1xyXG4gICAgaGVhcnRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2hlYXJ0LWJ1dHRvbl9saWtlZFwiKTtcclxuICB9XHJcbiAgaGVhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgIGhhbmRsZUxpa2UoZXZ0LCBkYXRhLl9pZCk7XHJcbiAgfSk7XHJcbiAgdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKVxyXG4gICk7XHJcbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlKGV2dCwgaWQpIHtcclxuICBjb25zdCBpc0xpa2VkID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19oZWFydC1idXR0b25fbGlrZWRcIik7XHJcbiAgYXBpXHJcbiAgICAuY2hhbmdlTGlrZVN0YXR1cyhpZCwgaXNMaWtlZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9faGVhcnQtYnV0dG9uX2xpa2VkXCIpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcclxuICBvcGVuTW9kYWwobW9kYWxQcmV2aWV3KTtcclxuICBtb2RhbEltYWdlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICBtb2RhbEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICBtb2RhbEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgZGF0YSkge1xyXG4gIHNlbGVjdGVkQ2FyZCA9IGNhcmRFbGVtZW50O1xyXG4gIHNlbGVjdGVkQ2FyZElkID0gZGF0YS5faWQ7XHJcbiAgb3Blbk1vZGFsKG1vZGFsRGVsZXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlU3VibWl0KGV2dCkge1xyXG4gIGZ1bmN0aW9uIHJlbW92ZUNhcmQoKSB7XHJcbiAgICByZXR1cm4gYXBpLnJlbW92ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XHJcbiAgICAgIGNsb3NlTW9kYWwobW9kYWxEZWxldGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGhhbmRsZVN1Ym1pdChyZW1vdmVDYXJkLCBldnQsIFwiRGVsZXRpbmcuLi5cIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VPbkVzYyk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlT25DYW5jZWxCdG4pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU9uRXNjKTtcclxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VPbkNhbmNlbEJ0bik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlT25Fc2MoZXZ0KSB7XHJcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGNvbnN0IGFjdGl2ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XHJcbiAgICBpZiAoYWN0aXZlTW9kYWwpIGNsb3NlTW9kYWwoYWN0aXZlTW9kYWwpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VPbkNhbmNlbEJ0bihldnQpIHtcclxuICBpZiAoZXZ0LnRhcmdldCA9PT0gY2FuY2VsTW9kYWxCdXR0b24pIHtcclxuICAgIGNvbnN0IGFjdGl2ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XHJcbiAgICBpZiAoYWN0aXZlTW9kYWwpIGNsb3NlTW9kYWwoYWN0aXZlTW9kYWwpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XHJcbiAgY2FyZHNMaXN0W21ldGhvZF0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuICByZXNldFZhbGlkYXRpb24oXHJcbiAgICBlZGl0TW9kYWwsXHJcbiAgICBbcHJvZmlsZU5hbWVJbnB1dCwgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXRdLFxyXG4gICAgc2V0dGluZ3NcclxuICApO1xyXG4gIG9wZW5Nb2RhbChlZGl0TW9kYWwpO1xyXG59KTtcclxuXHJcbmF2YXRhckVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuTW9kYWwoYXZhdGFyTW9kYWwpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuTW9kYWwoYWRkQ2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5wb3B1cHMuZm9yRWFjaCgocG9wdXApID0+IHtcclxuICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICBjbG9zZU1vZGFsKHBvcHVwKTtcclxuICAgIH1cclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIikpIHtcclxuICAgICAgY2xvc2VNb2RhbChwb3B1cCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5kZWxldGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRGVsZXRlU3VibWl0KTtcclxuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQpO1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcbiIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBlZGl0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBlZGl0QXZhdGFyKHsgYXZhdGFyIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlTGlrZVN0YXR1cyhpZCwgaXNMaWtlZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcGk7XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2V0QnV0dG9uVGV4dCIsImJ1dHRvbiIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZGVmYXVsdFRleHQiLCJ0ZXh0Q29udGVudCIsImhhbmRsZVN1Ym1pdCIsInJlcXVlc3QiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdEJ1dHRvbiIsInN1Ym1pdHRlciIsInRoZW4iLCJ0YXJnZXQiLCJyZXNldCIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiZm9ybUlucHV0IiwiY29uZmlnIiwiZm9ybUVycm9yIiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsImVuYWJsZVZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImdldEVsZW1lbnRCeUlkIiwic3JjIiwibG9nb1NyYyIsInBlblNyYyIsInBsdXNTcmMiLCJhdmF0YXJJbWFnZSIsImF2YXRhck1vZGFsIiwiYXZhdGFyRm9ybSIsImZvcm1zIiwiYXZhdGFyRWRpdEJ0biIsImF2YXRhckxpbmtJbnB1dCIsImVkaXRQcm9maWxlQnV0dG9uIiwiZWRpdE1vZGFsIiwicHJvZmlsZUZvcm0iLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImFkZENhcmRCdXR0b24iLCJhZGRDYXJkTW9kYWwiLCJjYXJkRm9ybSIsImNhcmRMaW5rSW5wdXQiLCJjYXJkTmFtZUlucHV0IiwiY2FyZHNMaXN0IiwicG9wdXBzIiwiY2FyZFRlbXBsYXRlIiwibW9kYWxQcmV2aWV3IiwibW9kYWxJbWFnZU5hbWUiLCJtb2RhbEltYWdlIiwibW9kYWxEZWxldGUiLCJkZWxldGVGb3JtIiwiY2FuY2VsTW9kYWxCdXR0b24iLCJhcGkiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0QXBwSW5mbyIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJlZGl0VXNlckluZm8iLCJfcmVmMiIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdEF2YXRhciIsIl9yZWYzIiwiYXZhdGFyIiwiYWRkTmV3Q2FyZCIsIl9yZWY0IiwibGluayIsInJlbW92ZUNhcmQiLCJjaGFuZ2VMaWtlU3RhdHVzIiwiaXNMaWtlZCIsImF1dGhvcml6YXRpb24iLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImxvZyIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lIiwiY2FyZEltYWdlIiwiaGVhcnRCdXR0b24iLCJ0cmFzaEJ1dHRvbiIsImFsdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwiZXJyIiwiaGFuZGxlTGlrZSIsIl9pZCIsIm9wZW5Nb2RhbCIsImhhbmRsZURlbGV0ZUNhcmQiLCJoYW5kbGVJbWFnZUNsaWNrIiwibW9kYWwiLCJjbG9zZU9uRXNjIiwiY2xvc2VPbkNhbmNlbEJ0biIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiYWN0aXZlTW9kYWwiLCJ1c2VySW5mbyIsImNhcmRzIiwiaXRlbSIsInJlbmRlckNhcmQiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsInBvcHVwIiwiY2FyZERhdGEiLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==